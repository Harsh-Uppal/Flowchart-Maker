window.addEventListener("load",()=>PropertiesPanel.node=document.querySelector("#properties-panel"));const PropertiesPanel={node:null,active:!1,inspectingProperties:null,propertyInputs:{},activate(e){null==PropertiesPanel.inspectingProperties&&(PropertiesPanel.node=document.querySelector("#properties-panel")),e?(PropertiesPanel.load(),PropertiesPanel.node.style.display=""):PropertiesPanel.noDisplayTimeout=setTimeout(()=>{PropertiesPanel.node.style.display="none"},1e3),PropertiesPanel.node.style.bottom=e?"0":"-100%",PropertiesPanel.active=e},load(){if(null!=PropertiesPanel.inspectingProperties){const r=document.querySelector("#properties-panel > .properties");r.innerHTML="";let e=null;for(const p in PropertiesPanel.inspectingProperties){const s=PropertiesPanel.inspectingProperties[p];if("default"!=p&&"setProperty"!=p&&"delete"!=p&&(s.multiple||s.type.endsWith("header")||s.visible)){this.propertyInputs[p]={};const i=document.createElement("div");if(null!=s.name&&""!=s.name.toString().trim()){const l=document.createElement("label");l.textContent=s.name,i.appendChild(l),this.propertyInputs[p].label=l}switch(!s.multiple&&s.type.endsWith("header")&&(r.appendChild(i),i.className="property-header"),s.multiple||!s.type.endsWith("header")&&null!=e||((e=document.createElement("div")).className="property-group",r.appendChild(e)),s.type){case"header":i.classList.add("no-flex");const o=e,a=document.createElement("div");a.className="expandArrow",a.addEventListener("click",()=>{a.style.transform=""==a.style.transform?"rotate(-90deg)":"",o.style.display=""==o.style.display?"none":""}),i.appendChild(a);break;case"btnheader":i.classList.add("no-flex");for(let e=0;e<s.classes.length;e++){const c=document.createElement("button");c.className=s.classes[e],c.addEventListener("click",s.click),i.appendChild(c)}break;default:if(s.multiple&&(!Array.isArray(s.type)||!Array.isArray(s.val)||s.type.length!=s.val.length))break;this.propertyInputs[p].input=[];var t=s.multiple?s.type.length:1;for(let e=0;e<t;e++){const d=s.multiple?{type:s.type[e],val:s.val[e],options:s.options?s.options[e]:null}:{type:s.type,val:s.val,options:s.options},u=document.createElement("button"==d.type?"button":"select"==d.type?"select":"input");var n=()=>{PropertiesPanel.propertyChanged(p,"checkbox"==u.type?u.checked:"SELECT"==u.nodeName?u.selectedIndex:u.value,e)};u.type=d.type||"text","button"==u.type?u.addEventListener("click",d.val):"checkbox"==u.type?u.checked=d.val:"select"==d.type?Array.isArray(d.options)?d.options.forEach(e=>{const t=document.createElement("option");t.setAttribute("value",e),t.innerText=e,u.appendChild(t)}):console.error("Input value expected to be an array"):u.value=d.val||"","select"!=d.type&&(u.innerHTML=null==s.content?"":s.content),u.className=s.iClass,u.addEventListener("keyup",n),u.addEventListener("change",n),i.appendChild(u),this.propertyInputs[p].input.push(u)}if(s.remF){const P=document.createElement("button");P.className="removeBtn",P.addEventListener("click",()=>{s.remF(p),i.remove(),delete PropertiesPanel.inspectingProperties[p]}),i.appendChild(P)}}!s.multiple&&s.type.endsWith("header")||e.appendChild(i)}}}},refresh(n){if(null!=this.propertyInputs){var e=PropertiesPanel.inspectingProperties[n];const t=this.propertyInputs[n];null!=e&&null!=t&&t.input.forEach((e,t)=>{e.value=this.inspectingProperties[n].val[t]})}},resetProperties(){PropertiesPanel.inspectingProperties=PropertiesPanel.inspectingProperties.default;const e=document.querySelector("#properties-panel > .properties");let t=-1;for(const n in PropertiesPanel.inspectingProperties){t++;const r=PropertiesPanel.inspectingProperties[n];if("setProperty"!=n&&"delete"!=n&&!r.type.endsWith("header")){PropertiesPanel.inspectingProperties.setProperty(n,propVal);const p=e.children[t].querySelector("input");p.value="button"==p.type?"":r.val,p.className=null==r.iClass?p.type+"Input":r.iClass}}PropertiesPanel.inspectingProperties.default={...PropertiesPanel.inspectingProperties}},deleteItem(){PropertiesPanel.inspectingProperties.delete(),PropertiesPanel.activate(!1),PropertiesPanel.inspectingProperties=null},propertyChanged:(e,t,n)=>PropertiesPanel.inspectingProperties.setProperty(e,t,n)},createProperty=(e,t,n,r={remove:null,inputClass:"",multiple:!1,inputContent:"",visible:!0})=>{try{t=t.toLowerCase()}catch{}var{remove:r,inputClass:p,multiple:s,inputContent:i,visible:l}=r;return"select"==t?{name:e,type:t,val:0,options:n,remF:r,iClass:p,content:i,multiple:s,visible:l||!0}:{name:e,type:t,val:n,remF:r,iClass:p,content:i,multiple:s,visible:l||!0}},createPropertyHeader=e=>({name:e,type:"header"}),createPropertyBtnHeader=(e,t,n)=>({name:e,type:"btnheader",classes:t,click:n});